<!DOCTYPE html>
<html>
<head>
  <title>Leaflet Map</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map { height: 600px; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Sample data equivalent to your CSV content
    const projects = [
      { Client: "3780 Bayridge, West Vancouver", Department: "Urban Forestry/FireSmart", Latitude: 49.344167, Longitude: -123.220000, Type: "Arborist Report" },
      { Client: "ABCFP", Department: "Niche", Latitude: 49.288056, Longitude: -123.126389, Type: "Committee, Training" },
      { Client: "Alberni-Clayoquot Regional District", Department: "Planning", Latitude: 49.076389, Longitude: -125.766667, Type: "CWRP" },
      { Client: "Askari, Pooneh", Department: "Urban Forestry/FireSmart", Latitude: 49.376389, Longitude: -123.290000, Type: "WHA" },
      { Client: "BCIT", Department: "GIS", Latitude: 49.015833, Longitude: -121.071389, Type: "UAV" }
      // Add more data here
    ];

    // Initialize the map
    const map = L.map('map').setView([49.25, -123.12], 10); // Centered at Vancouver as an example
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Add circle markers
    projects.forEach(client => {
      L.circleMarker([client.Latitude, client.Longitude], {
        color: client.Department === "Urban Forestry/FireSmart" ? "red" :
               client.Department === "Niche" ? "blue" :
               client.Department === "Planning" ? "green" :
               client.Department === "GIS" ? "purple" :
               client.Department === "Innovations" ? "orange" :
               client.Department === "Prescriptions/Ops" ? "yellow" : "black",
        radius: 5
      }).addTo(map)
      .bindPopup(`<b>Client:</b> ${client.Client}<br><b>Department:</b> ${client.Department}<br><b>Type:</b> ${client.Type}`)
      .bindTooltip(client.Client);
    });

    // Add legend
    const legend = L.control({ position: 'bottomright' });
    legend.onAdd = function(map) {
      const div = L.DomUtil.create('div', 'info legend');
      const departments = ["Urban Forestry/FireSmart", "Niche", "Planning", "GIS", "Innovations", "Prescriptions/Ops"];
      const colors = ["red", "blue", "green", "purple", "orange", "yellow"];
      for (let i = 0; i < departments.length; i++) {
        div.innerHTML += `<i style="background: ${colors[i]}"></i> ${departments[i]}<br>`;
      }
      return div;
    };
    legend.addTo(map);
  </script>
</body>
</html>
